# Описание репозитория :book:
В данном репозитории реализовано WEB-приложение, использующее Spring Boot, PostgreSQL, Thymeleaf, JDBC API, представляющее из себя интерфейс для заполнения БД и показа информации пользователю в виде таблицы :snowflake:

# Техническое задание :mortar_board:
* *Создайте БД*
* *Создайте в БД три таблицы: saldo (сальдо по лицевому счету), charges (начисления по лицевому счету, payments (платежи по лицевому счету)*
* *Реализовать WEB-интерфейс для заполнения таблиц*
* *Реализовать вывод информации на основае хранимых процедур в виде оборотной ведомости*  

***Оборотная ведомость*** (в клетке за месяц первая строка – это начисления по квартире; вторая строка – это платеж по квартире; третья строка – это сальдо на конец месяца.  
Примечание: сальдо – это бухгалтерский термин, обозначающий итог на начало или конец периода по той или иной операции (счету)
![image](https://github.com/DenisStepanidenko/Web-interface-for-filling-in-tables/assets/110686828/b0b18c40-da32-46c0-848f-572ef1daf03c)

# Техническое описание :headphones:
## База данных:  
Проект использует 3 таблицы, созданные в PostgreSQL    

Таблица для записи ***начислений***:  

``` sql
CREATE TABLE charges -- начисления
(
    id               int primary key generated by default as identity,
    personal_account varchar          not null,
    year             varchar          not null,
    month            varchar          not null,
    value            double precision not null
);
```

Таблица для записи ***платежей***
``` sql
CREATE TABLE payments -- платёж
(
    id               int primary key generated by default as identity,
    personal_account varchar          not null,
    year             varchar          not null,
    month            varchar          not null,
    value            double precision not null

);
```

Таблица для записи ***сальдо***
``` sql
CREATE TABLE saldo -- сальдо
(
    id               int primary key generated by default as identity,
    personal_account varchar          not null,
    year             varchar          not null,
    month            varchar          not null,
    value            double precision not null
);
```
## Классы и главные методы :clapper:
## Класс HomeController :ballot_box_with_check:
Данный класс с аннотацией @Controller
### Метод *public String home()* :white_check_mark:
Данный метод возвращает домашнюю страницу пользователя по адерсу /home, на которой расположен основной функционал
***
## Класс SaveController :ballot_box_with_check:
Данный класс с аннотацией @Controller
### Метод *public String saveSaldo(@RequestParam("personal_account") String personalAccount, @RequestParam("value") double value, @RequestParam("year") String year)* :white_check_mark:
Данный метод принимает по PostMapping информацию введённую пользователем об изначальном сальдо и занимается записью в БД этих данных посредством сервиса.
### Метод *public String saveCharge(@RequestParam("personal_account") String personalAccount, @RequestParam("value") double value, @RequestParam("year") String year, @RequestParam("month") String month)*  :white_check_mark:
Данный метод принимает по PostMapping информацию введённую пользователем об текущем начислении и занимается записью в БД этих данных посредством сервиса.
### Метод *public String savePayment(@RequestParam("personal_account") String personalAccount, @RequestParam("value") double value, @RequestParam("year") String year, @RequestParam("month") String month)* :white_check_mark:
Данный метод принимает по PostMapping информацию введённую пользователем об текущем платеже и занимается записью в БД этих данных посредством сервиса.
***
## Класс ShowController :ballot_box_with_check:
Данный класс с аннотацией @Controller
### Метод *public String showTable(@RequestParam("year") String year, Model model)*  :white_check_mark:
Данный метод принимает по PostMapping информацию о годе, за которую пользователь хочет посмотреть оборотную ведомость. Возвращает html страницу, на которой отображаются все необходимые данные.
***
## Класс PersonalAccountService :ballot_box_with_check:
Данный класс с аннотацией @Service, в нём прописана бизнес логика приложения
### Метод  *public void saveSaldo(String personalAccount, double value, String year)* :white_check_mark:
Данный метод принимает от контроллера данные для записи сальдо и посредством DAO класса записывает их в БД.
### Метод  *public void saveCharge(String personalAccount, double value, String year, String month)* :white_check_mark:
Данный метод принимает от контроллера данные для записи начисления и посредством DAO класса записывает их в БД. Также здесь прописана логика обновления сальдо после поступления начисления.
### Метод *public void savePayment(String personalAccount, double value, String year, String month)* :white_check_mark:
Данный метод принимает от контроллера данные для записи платежа и посредством DAO класса записывает их в БД. Также здесь прописана логика обновления сальдо после поступления платежа.
### Метод *public List<ResultDto> createResulList(String year)* :white_check_mark:
Данный метод формирует List с объектами ResultDto для отправки их в модель для показа пользователю оборотной ведомости.
***
## Класс PersonalAccountDao :ballot_box_with_check:
Данный класс предоставляет функционал для работы с БД.
### Метод *public void saveSaldo(String personalAccount, double value, String year, String month)* :white_check_mark:
Данный метод записывает данные для сальдо в БД.
### Метод *public void saveCharge(String personalAccount, double value, String year, String month)* :white_check_mark:
Данный метод записывает данные для начисления в БД. 
### Метод *public void savePayment(String personalAccount, double value, String year, String month)* :white_check_mark:
Данный метод записывает данные для платежа в БД.
### Метод *public ResultSet getSaldo(String month, String year, String personalAccount)* :white_check_mark:
Метод, который получает значение сальдо по месяцу, году и лицевому счёту.
### Метод *public ResultSet getCharge(String year)* :white_check_mark:
Метод, который получает значения для всех начислений  по данному году.
### Метод *public ResultSet getPayment(String year)* :white_check_mark:
Метод, который получает значения для всех платежей по данному году.
### Метод *public ResultSet getSaldo(String year)* :white_check_mark:
Метод, который получает значения для всех сальдо по данному году.
### Метод *public void changeSaldo(String personalAccount, String month, String year, double newSaldo)* :white_check_mark:
Обновляет значение сальдо по году, месяц, лицевому счёту.
### Метод *public ResultSet getAllUniquePersonalAccount()* :white_check_mark:
Выдаёт все уникальные значения для лицевых счетов пользователей.
***
## Класс ResultDto :ballot_box_with_check:
Данный класс представляет из себя информацию по каждому лицевому счёту в виде значений по платежам, сальдо и начислениям за каждый месяц данного года. Отправляется в модель для показа пользователю данных.

# Пример использования :ghost:
На странице по /home у нас доступен такой интерфейс (особого уклона в CSS и JS не было, данное задание для тренировки backend части и работой с БД)  

![image](https://github.com/DenisStepanidenko/Web-interface-for-filling-in-tables/assets/110686828/76ce4ed7-da66-4783-aa00-83100dbd633c)

На каждую кнопочку можно нажать и высветится форма для заполения информации, например , откроем форму для заполнения начисления  

![image](https://github.com/DenisStepanidenko/Web-interface-for-filling-in-tables/assets/110686828/39008e18-0c38-4b5e-9019-ec32ea1ff61e)

При нажатии на кнопочку отправить, данная форма исчезает и возвращается старый интерфейс (сделано с помощью JS)

И теперь посмотрим как выводится оборотная ведомость по исходным данным

![image](https://github.com/DenisStepanidenko/Web-interface-for-filling-in-tables/assets/110686828/10a5a108-13b5-402f-84ba-be4abea0b738)










